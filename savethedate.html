<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Save the Date – Jenny & Philip</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <nav class="navbar">
    <a href="index.html">Home</a>
    <a href="schedule.html">Schedule</a>
    <a href="venue.html">Venue</a>
    <a href="faqs.html">FAQs</a>
    <a href="savethedate.html">Save the Date</a>
  </nav>
  <div class="container">
    <h1>Save the Date</h1>
    <div class="message">
      Please enter your details below to receive your invitation!<br>
      <em>Please use your personal Invite Code (from your save the date).</em>
    </div>
    <form id="rsvp-form">
      <input name="firstGuestName" type="text" placeholder="Full name of first guest" required autofocus />
      <textarea name="additionalGuests" placeholder="Full names of additional guests, as per your save the date" rows="3"></textarea>
      <input name="email" type="email" placeholder="Email Address" required />
      <input name="address" type="text" placeholder="Postal Address" required />
      <input name="inviteCode" placeholder="Invite Code" required />
      <button type="submit">Submit Details</button>
    </form>
    <div id="message" class="message-status"></div>
  </div>
  <footer>
    &copy; 2026 Jenny &amp; Philip – Birtsmorton Court
  </footer>
  <script>
  // RSVP JS
  const FORM = document.getElementById("rsvp-form");
  const MESSAGE = document.getElementById("message");

  FORM.addEventListener("submit", async (e) => {
    e.preventDefault();
    MESSAGE.textContent = "Submitting...";
    MESSAGE.className = "message-status";
    try {
      const res = await fetch(
        "https://script.google.com/macros/s/AKfycbwnmG9PAEOUj_TR4rlSJ_jAC-M9WsoPJHC8tO7WK4ZUgOm_ReH9ojI5mXKcUQYwqSrVRQ/exec",
        {
          method: "POST",
          body: new URLSearchParams({
            inviteCode: FORM.inviteCode.value,
            firstGuestName: FORM.firstGuestName.value,
            additionalGuests: FORM.additionalGuests.value,
            email: FORM.email.value,
            address: FORM.address.value
          })
        }
      );
      const result = await res.json();
      if (!result.success) {
        MESSAGE.textContent = result.message;
        MESSAGE.classList.add("error");
        return;
      }
      MESSAGE.textContent = "Thank you! Your details have been recorded and your invitation will be sent soon.";
      MESSAGE.classList.add("success");
      FORM.reset();
    } catch (err) {
      MESSAGE.textContent = "Network error. Please try again.";
      MESSAGE.classList.add("error");
    }
  });
  </script>
</body>
</html>
