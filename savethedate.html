<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>RSVP – Jenny & Philip</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <nav class="navbar">
    <a href="index.html">Home</a>
    <a href="schedule.html">Schedule</a>
    <a href="venue.html">Venue</a>
    <a href="faqs.html">FAQs</a>
    <a href="savethedate.html">Save the Date</a>
  </nav>
  <div class="container">
    <h1>Save the Date & RSVP</h1>
    <div class="countdown" id="countdown"></div>
    <div class="message">
      Please RSVP to let us know if you’ll be able to join us!<br>
      <em>Please use your personal Invite Code (from your invitation).</em>
    </div>
    <form id="rsvp-form">
      <input name="fullName" type="text" placeholder="Full Name(s)" required autofocus />
      <input name="email" type="email" placeholder="Email Address" required />
      <input name="address" type="text" placeholder="Postal Address" required />
      <select name="attending" required>
        <option value="">Will you attend?</option>
        <option value="Yes">Yes, looking forward to it!</option>
        <option value="No">Sorry, can't attend</option>
      </select>
      <input name="inviteCode" placeholder="Invite Code" required />
      <button type="submit">Send RSVP</button>
    </form>
    <div id="message" class="message-status"></div>
  </div>
  <footer>
    &copy; 2026 Jenny &amp; Philip – Birtsmorton Court
  </footer>
  <script>
  // Countdown to wedding day
  const countdown = document.getElementById("countdown");
  const weddingDate = new Date(2026, 9, 17); // Note: months are 0-based
  function updateCountdown() {
    const today = new Date();
    const diff = weddingDate - today;
    if (diff <= 0) {
      countdown.textContent = "It's our wedding day!";
      return;
    }
    const days = Math.floor(diff / (1000*60*60*24));
    countdown.textContent = "Only " + days + " day" + (days !== 1 ? "s" : "") + " to go!";
  }
  updateCountdown();
  setInterval(updateCountdown, 12*60*60*1000);

  // RSVP JS
  const FORM = document.getElementById("rsvp-form");
  const MESSAGE = document.getElementById("message");

  FORM.addEventListener("submit", async (e) => {
    e.preventDefault();
    MESSAGE.textContent = "Submitting...";
    MESSAGE.className = "message-status";
    try {
      const res = await fetch(
        "https://script.google.com/macros/s/AKfycbwnmG9PAEOUj_TR4rlSJ_jAC-M9WsoPJHC8tO7WK4ZUgOm_ReH9ojI5mXKcUQYwqSrVRQ/exec",
        {
          method: "POST",
          body: new URLSearchParams({
            inviteCode: FORM.inviteCode.value,
            fullName: FORM.fullName.value,
            email: FORM.email.value,
            address: FORM.address.value,
            attending: FORM.attending.value
          })
        }
      );
      const result = await res.json();
      if (!result.success) {
        MESSAGE.textContent = result.message;
        MESSAGE.classList.add("error");
        return;
      }
      MESSAGE.textContent = "Thank you! Your RSVP has been recorded.";
      MESSAGE.classList.add("success");
      FORM.reset();
    } catch (err) {
      MESSAGE.textContent = "Network error. Please try again.";
      MESSAGE.classList.add("error");
    }
  });
  </script>
</body>
</html>
